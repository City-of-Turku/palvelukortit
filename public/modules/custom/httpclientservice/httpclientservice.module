<?php

/**
 * @file
 * Contains httpclientservice.module.
 */

use Drupal\httpclientservice\GenerateContent\Palvelu;
use Drupal\httpclientservice\GenerateContent\ClientService;

/**
 * Implements hook_cron().
 */
function httpclientservice_cron() {
  $state     = \Drupal::state();
  $last_time = $state->get('httpclientservice.import_palvelut', FALSE);

  $palvelupiste = new Palvelu();
  ClientService::httpclientserviceDeleteEntity('service_card');
  $palvelupiste->httpclientserviceSavePalvelu();

  // Store the timestamp in state.
  $last_time = \Drupal::time()->getRequestTime();
  \Drupal::state()->set('httpclientservice.import_palvelut', $last_time);
}
