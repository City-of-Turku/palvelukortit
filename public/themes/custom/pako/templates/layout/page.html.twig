{#
/**
 * @file
 * Theme override to display a single page.
 */
#}

{% set page_content_classes = [
  'page-content',
  node ? 'page-content--node',
  node.getType() ? 'page-type--' ~ node.getType(),
  taxonomy_term ? 'page-type--taxonomy-term',
  webform ? 'page-content--webform',
  not node.isPublished() ? 'page-content--unpublished',
]
%}

{% set before_content_classes = [
  'page-before_content ',
  node.getType() ? 'page-before_content--' ~ node.getType(),
  taxonomy_term ? 'page-before_content--taxonomy-term',
  webform ? 'page-before_content--webform',
]
%}

{%
  set section_variables = { section_element: 'content' }
%}

<div class="page-wrapper" id="page">
  <div class="sticky-main">
    {% if page.header or page.navigation %}
      <header class="page-header" id="header" role="banner">
        {% if page.header %}
          <div class="container page-header__container">
            {{ page.header }}
          </div>
        {% endif %}
      </header>
    {% endif %}

    {% block content_wrapper %}
      {% if page.breadcrumb %}
        {% embed "@pako/misc/container.twig" with {container_element: 'breadcrumb'} %}
          {% block container_content %}
            {{ page.breadcrumb }}
          {% endblock container_content %}
        {% endembed %}
      {% endif %}

      {% if page.messages %}
        <div class="page-messages" id="messages">
          <div class="container page-messages__container">
            {{ page.messages }}
          </div>
        </div>
      {% endif %}

      {% if page.tools %}
        {% embed "@pako/misc/container.twig" with {container_element: 'tools'} %}
          {% block container_content %}
            {{ page.tools }}
          {% endblock container_content %}
        {% endembed %}
      {% endif %}

      <div class="content__wrapper container">
        <main class="page-main" id="main" role="main">
          <a id="main-content" tabindex="-1"></a>
          {% block content %}
            <div id="content" {{ create_attribute({'class': page_content_classes} ) }}>
              {% embed "@pako/misc/section.twig" with section_variables %}
                {% block section_content %}
                  {{ page.content }}
                {% endblock section_content %}
              {% endembed %}
            </div>
          {% endblock %}
        </main>
      </div>
    {% endblock %}
  </div>

  {% if page.footer %}
    <footer class="page-footer" id="footer" role="contentinfo">
      {% set footer_container_class = 'l-footer page-footer' %}
      {% if has_sidebar_first %}
        {% set footer_container_class = 'l-footer--small ' ~ footer_container_class %}
      {% endif %}
      {% embed "@pako/misc/container.twig" with {container_element: footer_container_class} %}
        {% block container_content %}
          {{ page.footer }}
        {% endblock container_content %}
      {% endembed %}
    </footer>
  {% endif %}
</div>
